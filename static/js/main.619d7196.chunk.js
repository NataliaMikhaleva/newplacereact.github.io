(this["webpackJsonpnewplacereact.github.io"]=this["webpackJsonpnewplacereact.github.io"]||[]).push([[0],{16:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(7),r=a.n(s),o=(a(3),a(2)),i=a.p+"static/media/logo.fad4f8a5.svg",l=a(0);var p=function(){return Object(l.jsx)("header",{className:"header root__section",children:Object(l.jsx)("img",{src:i,alt:"mesto logo",className:"logo"})})},u=a(10),d=a(8),j=a(9),b={url:"".concat("https://nomoreparties.co","/cohort11")},m=new(function(){function e(t){Object(d.a)(this,e),this.baseUrl=t.url}return Object(j.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:{authorization:"5f964995-7da7-4204-b259-11a4aa038056"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:{authorization:"5f964995-7da7-4204-b259-11a4aa038056"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))}},{key:"patchUserInfo",value:function(e,t){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:"5f964995-7da7-4204-b259-11a4aa038056","Content-Type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))}},{key:"patchNewCard",value:function(e,t){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{authorization:"5f964995-7da7-4204-b259-11a4aa038056","Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:"5f964995-7da7-4204-b259-11a4aa038056","Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))}},{key:"patchAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:"5f964995-7da7-4204-b259-11a4aa038056","Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}))}}]),e}())(b);var _=function(e){return Object(l.jsxs)("div",{className:"place-card",id:"card._id",children:[Object(l.jsx)("div",{className:"place-card__image",style:{backgroundImage:"url(".concat(e.card.link,")")},onClick:function(){e.onCardClick(e.card)},children:Object(l.jsx)("button",{className:"place-card__delete-icon"})}),Object(l.jsxs)("div",{className:"place-card__description",children:[Object(l.jsx)("h3",{className:"place-card__name",children:e.card.name}),Object(l.jsxs)("div",{className:"place-card__like",children:[Object(l.jsx)("button",{className:"place-card__like-icon"}),Object(l.jsx)("p",{className:"place-card__likeAmount",children:e.card.likes.length})]})]})]},e.card.id)};var h=function(e){var t=n.a.useState(),a=Object(o.a)(t,2),c=a[0],s=a[1],r=n.a.useState(),i=Object(o.a)(r,2),p=i[0],d=i[1],j=n.a.useState(),b=Object(o.a)(j,2),h=b[0],f=b[1],O=n.a.useState([]),x=Object(o.a)(O,2),N=x[0],v=x[1];return n.a.useEffect((function(){m.getUserInfo().then((function(e){s(e.name),d(e.about),f(e.avatar)})).catch((function(e){console.log(e)}))})),n.a.useEffect((function(){m.getInitialCards().then((function(e){var t=Array.from(e);v(Object(u.a)(t))})).catch((function(e){console.log(e)}))}),[]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"profile root__section",children:Object(l.jsxs)("div",{className:"user-info",children:[Object(l.jsx)("div",{className:"user-info__photo",onClick:e.onEditAvatar,style:{backgroundImage:"url(".concat(h,")")}}),Object(l.jsxs)("div",{className:"user-info__data",children:[Object(l.jsx)("h1",{className:"user-info__name",children:c}),Object(l.jsx)("p",{className:"user-info__job",children:p}),Object(l.jsx)("button",{className:"button-edit user-info__button-edit",onClick:e.onEditProfile,children:"Edit"})]}),Object(l.jsx)("button",{className:"button user-info__button",onClick:e.onAddPlace,children:"+"})]})}),Object(l.jsx)("div",{className:"places-list root__section",children:N.map((function(t){return Object(l.jsx)(_,{card:t,onCardClick:e.handle})}))})]})},f=a.p+"static/media/close.8a65f75d.svg";var O=function(e){return Object(l.jsx)("div",{className:e.isOpen?"popup popup_type_".concat(e.name," popup_is-opened"):"popup popup_type_".concat(e.name),children:Object(l.jsxs)("div",{className:"popup__content",children:[Object(l.jsx)("img",{src:f,alt:"",className:"popup__close popup__close_place",onClick:e.close}),Object(l.jsx)("h3",{className:"popup__title",children:e.title}),Object(l.jsx)("form",{className:"popup__form",name:e.name,noValidate:!0,children:e.children})]})})};var x=function(e){return void 0==e.card?null:Object(l.jsx)("div",{className:void 0!==e.card?"popup-card popup-card_is-opened":"popup-card",children:Object(l.jsxs)("div",{className:"popup-card__content",children:[Object(l.jsx)("img",{src:f,alt:"",className:"popup__close",onClick:e.close}),Object(l.jsx)("div",{className:"popup-card__image",style:{backgroundImage:"url(".concat(e.card.link,")")}})]})})};var N=function(){var e=n.a.useState(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],s=n.a.useState(!1),r=Object(o.a)(s,2),i=r[0],u=r[1],d=n.a.useState(!1),j=Object(o.a)(d,2),b=j[0],m=j[1],_=n.a.useState(),f=Object(o.a)(_,2),N=f[0],v=f[1];function g(){c(!1),m(!1),u(!1),v()}return Object(l.jsxs)("div",{className:"root",children:[Object(l.jsx)(p,{}),Object(l.jsx)(h,{onEditProfile:function(){m(!0)},onAddPlace:function(){u(!0)},onEditAvatar:function(){c(!0)},handle:function(e){v(e)}}),Object(l.jsx)(O,{name:"new",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:i,close:g,children:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"input-container",children:[Object(l.jsx)("input",{type:"text",name:"name",className:"popup__input popup__input_type_name popup__was-clicked",required:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(l.jsx)("span",{id:"error-name",className:"error-message"})]}),Object(l.jsxs)("div",{className:"input-container",children:[Object(l.jsx)("input",{type:"url",name:"link",className:"popup__input popup__input_type_link-url popup__was-clicked",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"}),Object(l.jsx)("span",{id:"error-link",className:"error-message"})]}),Object(l.jsx)("button",{className:"button popup__button",children:"+"})]})}),Object(l.jsx)(O,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:b,close:g,children:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"input-container",children:[Object(l.jsx)("input",{type:"text",name:"username",className:"popup__input popup__input_type_text popup__was-clicked",required:!0,placeholder:"\u0418\u043c\u044f"}),Object(l.jsx)("span",{id:"error-username",className:"error-message"})]}),Object(l.jsxs)("div",{className:"input-container",children:[Object(l.jsx)("input",{type:"text",name:"userinfo",className:"popup__input popup__input_type_userinfo popup__was-clicked",required:!0,placeholder:"\u041e \u0441\u0435\u0431\u0435"}),Object(l.jsx)("span",{id:"error-userinfo",className:"error-message"})]}),Object(l.jsx)("button",{className:"button popup__button popup__button_edit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})}),Object(l.jsx)(x,{card:N,close:g}),Object(l.jsx)(O,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:a,close:g,children:Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"input-container",children:[Object(l.jsx)("input",{type:"url",name:"avatarlink",className:"popup__input popup__input_type_link-url popup__was-clicked",required:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440"}),Object(l.jsx)("span",{id:"error-username",className:"error-message"})]}),Object(l.jsx)("button",{className:"button popup__button popup__button_edit popup__button_avatar",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})]})},v=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),v()},3:function(e,t,a){}},[[16,1,2]]]);
//# sourceMappingURL=main.619d7196.chunk.js.map